{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}

<h2 class="mb-4">ðŸ“Š Study Dashboard</h2>


<!-- Stats Cards -->
<div class="row text-center">

    <div class="col-md-3 mb-3">
        <div class="card shadow-sm p-3">
            <h6>Total Tasks</h6>
            <h4>{{ total_tasks }}</h4>
        </div>
    </div>

    <div class="col-md-3 mb-3">
        <div class="card shadow-sm p-3">
            <h6>Completed</h6>
            <h4 class="text-success">{{ completed_tasks }}</h4>
        </div>
    </div>

    <div class="col-md-3 mb-3">
        <div class="card shadow-sm p-3">
            <h6>Pending</h6>
            <h4 class="text-warning">{{ pending_tasks }}</h4>
        </div>
    </div>

    <div class="col-md-3 mb-3">
        <div class="card shadow-sm p-3">
            <h6>Missed</h6>
            <h4 class="text-danger">{{ missed_tasks }}</h4>
        </div>
    </div>

</div>

<!-- Overall Completion -->
<div class="card shadow-sm mb-4">
    <div class="card-body">
        <h5>Overall Completion</h5>
        <p><strong>{{ completion_percentage }}%</strong></p>
    </div>
</div>

<!-- Subject Progress -->
<div class="card shadow-sm mb-4">
    <div class="card-body">
        <h5>Subject Progress</h5>

        {% if subject_progress %}
            {% for subject, data in subject_progress.items() %}
                <div class="mt-3 p-3 border rounded bg-white">
                    <strong>{{ subject }}</strong>
                    <p class="mb-1">
                        {{ data.completed }} / {{ data.total }} completed
                    </p>
                    <p class="mb-0">
                        Progress: <strong>{{ data.percentage }}%</strong>
                    </p>
                </div>
            {% endfor %}
        {% else %}
            <p>No subjects added yet.</p>
        {% endif %}

    </div>
</div>

<!-- Progress Prediction -->
{% if prediction_message %}
<div class="card shadow-sm mb-3">
    <div class="card-body">
        <h5>ðŸ“ˆ Progress Prediction</h5>
        <p class="mb-0">{{ prediction_message }}</p>
    </div>
</div>
{% endif %}

<!-- Status Alert (Green / Red) -->
{% if status_message %}
<div class="alert alert-{{ status_type }}">
    {{ status_message }}
</div>
{% endif %}

{% endblock %}
